<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²½ì˜í•™ê³¼ ì»¤ë®¤ë‹ˆí‹°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        .page { display: none; }
        .page.active { display: block; }
        .modal { display: none; }
        .modal.active { display: flex; }
    </style>
</head>
<body class="bg-gray-50">
    <div class="max-w-md mx-auto bg-gray-50 min-h-screen pb-20">
        <!-- Header -->
        <div class="bg-gradient-to-r from-blue-600 to-blue-800 text-white p-6 shadow-lg">
            <div class="flex items-center gap-3 mb-2">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h1 class="text-2xl font-bold">ê²½ì˜í•™ê³¼ ì»¤ë®¤ë‹ˆí‹°</h1>
            </div>
            <p class="text-blue-100 text-sm">í•¨ê»˜ ì„±ì¥í•˜ëŠ” ìš°ë¦¬ í•™ê³¼</p>
        </div>

        <!-- Home Page -->
        <div id="homePage" class="page active p-4">
            <!-- Search Bar -->
            <div class="mb-4 relative">
                <svg class="absolute left-3 top-3 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <input type="text" id="searchInput" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <!-- Category Cards -->
            <div class="grid grid-cols-3 gap-3 mb-6">
                <div onclick="filterByCategory('question')" class="bg-blue-500 text-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer">
                    <svg class="w-8 h-8 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                    <p class="text-xs text-center font-medium">ë¬¸ì œ ì§ˆë¬¸</p>
                </div>
                <div onclick="filterByCategory('communication')" class="bg-green-500 text-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer">
                    <svg class="w-8 h-8 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                    <p class="text-xs text-center font-medium">ì†Œí†µ</p>
                </div>
                <div onclick="filterByCategory('info')" class="bg-purple-500 text-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer">
                    <svg class="w-8 h-8 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path>
                    </svg>
                    <p class="text-xs text-center font-medium">ì •ë³´ ê³µìœ </p>
                </div>
            </div>

            <!-- Info Banner -->
            <div class="bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-orange-400 p-4 mb-6 rounded">
                <h3 class="font-bold text-orange-800 mb-2">ğŸ’¡ ì•±ì˜ ëª©ì </h3>
                <ul class="text-sm text-orange-900 space-y-1">
                    <li>âœ“ ê³¼ì œ/ì‹œí—˜ ê³µë¶€ ì§ˆë¬¸ ê³µìœ </li>
                    <li>âœ“ ìœ í•™ìƒê³¼ ì‹ ì…ìƒ ì ì‘ ì§€ì›</li>
                    <li>âœ“ í•™ìƒë“¤ì˜ ì›í™œí•œ ì˜ê²¬ ì†Œí†µ</li>
                </ul>
            </div>

            <!-- Posts List -->
            <div class="space-y-3">
                <div class="flex items-center justify-between mb-3">
                    <h2 class="text-lg font-bold text-gray-800">ìµœê·¼ ê²Œì‹œê¸€</h2>
                    <button onclick="filterByCategory('all')" class="text-xs text-blue-600 hover:text-blue-800">ì „ì²´ë³´ê¸°</button>
                </div>
                <div id="postsList" class="space-y-3">
                    <div class="text-center text-gray-500 py-8">ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                </div>
            </div>
        </div>

        <!-- About Page -->
        <div id="aboutPage" class="page p-4">
            <div class="space-y-6">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">ê¸°ëŒ€ íš¨ê³¼</h2>
                    <div class="space-y-4">
                        <div class="flex gap-3">
                            <div class="bg-blue-100 p-2 rounded-lg h-fit">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800 mb-1">êµ­ì œ êµë¥˜ í™œì„±í™”</h3>
                                <p class="text-sm text-gray-600">
                                    êµ¬ê¸€ ë²ˆì—­ê¸° ë“±ì„ í™œìš©í•˜ì—¬ ìœ í•™ìƒë“¤ê³¼ì˜ ë”ìš± íš¨ê³¼ì ì¸ ì†Œí†µì„ í•˜ì—¬ íƒ€ ì–¸ì–´ ê³µë¶€ì— ë„ì›€ì´ ë  ê²ƒìœ¼ë¡œ ê¸°ëŒ€
                                </p>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <div class="bg-green-100 p-2 rounded-lg h-fit">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800 mb-1">ì§„ë¡œ ê°œë°œ ì§€ì›</h3>
                                <p class="text-sm text-gray-600">
                                    ëª°ëë˜ ìœ ìš©í•œ ì •ë³´ë¥¼ êµí™˜í•˜ì—¬ ë”ìš± ì·¨ì—… ë° ìê²©ì¦ ê³µë¶€ì— ë„ì›€ì„ ì¤„ ìˆ˜ ìˆì„ ê²ƒìœ¼ë¡œ ê¸°ëŒ€
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Firebase ì„¤ì • ì•ˆë‚´ -->
                <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded">
                    <h3 class="font-bold text-blue-800 mb-2">ğŸ”¥ Firebase ì—°ê²° í•„ìš”</h3>
                    <p class="text-sm text-blue-900 mb-2">ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ Firebase ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
                    <ol class="text-xs text-blue-800 space-y-1 ml-4">
                        <li>1. Firebase Consoleì—ì„œ í”„ë¡œì íŠ¸ ìƒì„±</li>
                        <li>2. Firestore Database í™œì„±í™”</li>
                        <li>3. Firebase ì„¤ì • ì •ë³´ë¥¼ ì½”ë“œì— ì¶”ê°€</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Floating Action Button -->
        <button onclick="openModal()" class="fixed bottom-20 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors z-40">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
        </button>

        <!-- New Post Modal -->
        <div id="newPostModal" class="modal fixed inset-0 bg-black bg-opacity-50 items-center justify-center p-4 z-50">
            <div class="bg-white rounded-lg p-6 w-full max-w-md">
                <h2 class="text-xl font-bold mb-4">ìƒˆ ê¸€ ì‘ì„±</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì‘ì„±ì ì´ë¦„</label>
                        <input type="text" id="postAuthor" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ê²Œì‹œíŒ ì„ íƒ</label>
                        <select id="postCategory" class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="question">ë¬¸ì œ ì§ˆë¬¸</option>
                            <option value="communication">ì†Œí†µ</option>
                            <option value="info">ì •ë³´ ê³µìœ </option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì œëª©</label>
                        <input type="text" id="postTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë‚´ìš©</label>
                        <textarea id="postContent" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" rows="4" class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="submitPost()" class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition-colors">
                            ì‘ì„±í•˜ê¸°
                        </button>
                        <button onclick="closeModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded hover:bg-gray-400 transition-colors">
                            ì·¨ì†Œ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg">
            <div class="max-w-md mx-auto flex justify-around p-3">
                <button onclick="showPage('home')" id="homeBtn" class="flex flex-col items-center gap-1 text-blue-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="text-xs">í™ˆ</span>
                </button>
                <button onclick="showPage('about')" id="aboutBtn" class="flex flex-col items-center gap-1 text-gray-500">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="text-xs">ì†Œê°œ</span>
                </button>
                <button class="flex flex-col items-center gap-1 text-gray-500">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span class="text-xs">í”„ë¡œí•„</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase ì„í¬íŠ¸
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // âš ï¸ ì—¬ê¸°ì— Firebase ì„¤ì •ì„ ì…ë ¥í•˜ì„¸ìš”!
        // Firebase Console > í”„ë¡œì íŠ¸ ì„¤ì • > ì¼ë°˜ > ë‚´ ì•±ì—ì„œ í™•ì¸ ê°€ëŠ¥
        const firebaseConfig = {
            apiKey: "AIzaSyBx_J3JQ1p-mYoO-gLe3bbZ4g3fn0C-OzE",
  authDomain: "management-47bee.firebaseapp.com",
  projectId: "management-47bee",
  storageBucket: "management-47bee.firebasestorage.app",
  messagingSenderId: "465336171216",
  appId: "1:465336171216:web:c535355176526a90d3fcd5"
        };

        // Firebase ì´ˆê¸°í™”
        let app, db;
        let isFirebaseConfigured = false;

        try {
            if (firebaseConfig.apiKey !== "YOUR_API_KEY") {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                isFirebaseConfigured = true;
                console.log("Firebase ì—°ê²° ì„±ê³µ!");
                loadPosts();
            } else {
                console.log("Firebase ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                showDemoMode();
            }
        } catch (error) {
            console.error("Firebase ì´ˆê¸°í™” ì‹¤íŒ¨:", error);
            showDemoMode();
        }

        const categoryInfo = {
            question: { name: 'ë¬¸ì œ ì§ˆë¬¸', color: 'bg-blue-500', icon: 'M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253' },
            communication: { name: 'ì†Œí†µ', color: 'bg-green-500', icon: 'M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z' },
            info: { name: 'ì •ë³´ ê³µìœ ', color: 'bg-purple-500', icon: 'M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z' }
        };

        let currentFilter = 'all';

        // ë°ëª¨ ëª¨ë“œ (Firebase ë¯¸ì„¤ì • ì‹œ)
        function showDemoMode() {
            const demoPosts = [
                {
                    category: 'question',
                    title: 'ì¬ë¬´íšŒê³„ ì¤‘ê°„ê³ ì‚¬ ë¬¸ì œ ì§ˆë¬¸',
                    content: 'ê°ê°€ìƒê°ë¹„ ê³„ì‚° ë°©ë²•ì´ ì´í•´ê°€ ì•ˆ ê°€ëŠ”ë° ë„ì™€ì£¼ì‹¤ ìˆ˜ ìˆë‚˜ìš”?',
                    author: 'ê¹€í•™ìƒ',
                    timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000)
                },
                {
                    category: 'communication',
                    title: 'ê²½ì˜í•™ê³¼ ìŠ¤í„°ë”” ëª¨ì§‘',
                    content: 'ë‹¤ìŒ ì£¼ë¶€í„° ë§ˆì¼€íŒ… ì›ë¡  ìŠ¤í„°ë”” ê°™ì´ í•˜ì‹¤ ë¶„ ê³„ì‹ ê°€ìš”?',
                    author: 'ì´ì¤€í˜¸',
                    timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000)
                },
                {
                    category: 'info',
                    title: 'CPA ìê²©ì¦ ì¥í•™ê¸ˆ ì •ë³´',
                    content: 'íšŒê³„ì‚¬ ì‹œí—˜ ì¤€ë¹„ìƒ ëŒ€ìƒ ì¥í•™ê¸ˆ ì‹ ì²­ ê¸°ê°„ì´ ë‹¤ìŒ ì£¼ê¹Œì§€ì…ë‹ˆë‹¤!',
                    author: 'Park Sarah',
                    timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000)
                }
            ];
            renderPosts(demoPosts);
        }

        // Firebaseì—ì„œ ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadPosts() {
            const q = query(collection(db, 'posts'), orderBy('timestamp', 'desc'));
            
            onSnapshot(q, (snapshot) => {
                const posts = [];
                snapshot.forEach((doc) => {
                    posts.push({ id: doc.id, ...doc.data() });
                });
                renderPosts(posts);
            }, (error) => {
                console.error("ê²Œì‹œê¸€ ë¡œë“œ ì‹¤íŒ¨:", error);
                showDemoMode();
            });
        }

        // ê²Œì‹œê¸€ ë Œë”ë§
        function renderPosts(posts) {
            const filteredPosts = currentFilter === 'all' 
                ? posts 
                : posts.filter(p => p.category === currentFilter);

            const postsList = document.getElementById('postsList');
            
            if (filteredPosts.length === 0) {
                postsList.innerHTML = '<div class="text-center text-gray-500 py-8">ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            postsList.innerHTML = filteredPosts.map(post => {
                const cat = categoryInfo[post.category];
                const timeAgo = getTimeAgo(post.timestamp);
                return `
                    <div class="bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow cursor-pointer">
                        <div class="flex items-start justify-between mb-2">
                            <div class="flex items-center gap-2">
                                <div class="${cat.color} p-1.5 rounded">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${cat.icon}"></path>
                                    </svg>
                                </div>
                                <span class="text-xs text-gray-500">${cat.name}</span>
                            </div>
                            <span class="text-xs text-gray-400">${timeAgo}</span>
                        </div>
                        <h3 class="font-bold text-gray-800 mb-1">${post.title}</h3>
                        <p class="text-sm text-gray-600 mb-3">${post.content}</p>
                        <div class="flex items-center justify-between text-xs text-gray-500">
                            <span>${post.author}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ì‹œê°„ í‘œì‹œ í•¨ìˆ˜
        function getTimeAgo(timestamp) {
            if (!timestamp) return 'ë°©ê¸ˆ';
            
            const now = new Date();
            const postTime = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
            const diff = Math.floor((now - postTime) / 1000);

            if (diff < 60) return 'ë°©ê¸ˆ';
            if (diff < 3600) return Math.floor(diff / 60) + 'ë¶„ ì „';
            if (diff < 86400) return Math.floor(diff / 3600) + 'ì‹œê°„ ì „';
            return Math.floor(diff / 86400) + 'ì¼ ì „';
        }

        // ê²Œì‹œê¸€ ì‘ì„±
        window.submitPost = async function() {
            const author = document.getElementById('postAuthor').value.trim();
            const title = document.getElementById('postTitle').value.trim();
            const content = document.getElementById('postContent').value.trim();
            const category = document.getElementById('postCategory').value;

            if (!author || !title || !content) {
                alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (isFirebaseConfigured) {
                try {
                    await addDoc(collection(db, 'posts'), {
                        author,
                        title,
                        content,
                        category,
                        timestamp: serverTimestamp()
                    });
                    closeModal();
                    alert('ê²Œì‹œê¸€ì´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } catch (error) {
                    console.error('ê²Œì‹œê¸€ ì‘ì„± ì‹¤íŒ¨:', error);
                    alert('ê²Œì‹œê¸€ ì‘ì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. Firebase ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                }
            } else {
                alert('Firebaseê°€ ì„¤ì •ë˜ì§€ ì•Šì•„ ë°ëª¨ ëª¨ë“œì—ì„œëŠ” ê¸€ ì‘ì„±ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.');
            }
        };

        // ì¹´í…Œê³ ë¦¬ í•„í„°
        window.filterByCategory = function(category) {
            currentFilter = category;
            if (isFirebaseConfigured) {
                loadPosts();
            } else {
                showDemoMode();
            }
        };

        // í˜ì´ì§€ ì „í™˜
        window.showPage = function(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(page + 'Page').classList.add('active');
            
            const buttons = document.querySelectorAll('.fixed.bottom-0 button');
            buttons.forEach(btn => {
                btn.classList.remove('text-blue-600');
                btn.classList.add('text-gray-500');
            });
            document.getElementById(page + 'Btn').classList.remove('text-gray-500');
            document.getElementById(page + 'Btn').classList.add('text-blue-600');
        };

        // ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°
        window.openModal = function() {
            document.getElementById('newPostModal').classList.add('active');
        };

        window.closeModal = function() {
            document.getElementById('newPostModal').classList.remove('active');
            document.getElementById('postAuthor').value = '';
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            document.getElementById('postCategory').value = 'question';
        };
    </script>
</body>
</html>